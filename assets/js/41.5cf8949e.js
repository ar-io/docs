(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{340:function(e,a,t){"use strict";t.r(a);var r=t(10),s=Object(r.a)({},(function(){var e=this,a=e._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"observation-and-incentives"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#observation-and-incentives"}},[e._v("#")]),e._v(" Observation and Incentives")]),e._v(" "),a("h2",{attrs:{id:"overview"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overview"}},[e._v("#")]),e._v(" Overview")]),e._v(" "),a("p",[e._v('The Observation and Incentive Protocol is designed to maintain and enhance the operational integrity of gateways on the AR.IO Network. It achieves this through a combination of incentivizing gateways for good performance and tasking those gateways to fulfill the role of "observers". The protocol is intentionally simple and adaptable, employing a smart contract-based method for onchain “voting” to assess peer performance while being flexible on how that performance is measured. This setup permits gateway and observer nodes to experiment and evolve best practices for performance evaluation, all while operating within the bounds of the network\'s immutable smart contract, thus eliminating the need for frequent contract updates (forks).')]),e._v(" "),a("p",[e._v("In this protocol, observers evaluate their gateway peers' performance to resolve ArNS names. Their aim is to ensure each gateway in the network accurately resolves a subset of names and assigning a pass / fail score based on their findings.")]),e._v(" "),a("p",[e._v('A key component of the protocol is its reward mechanism. This system is predicated on gateway performance and compliance with observation duties. Gateways that excel are tagged as "Functional Gateways" and earn rewards, while those that do not meet the criteria, “Deficient Gateways” risk facing penalties – namely, the lack of rewards.')]),e._v(" "),a("p",[e._v("Funds for incentive rewards are derived from the protocol balance, which consists of IO tokens collected from ArNS asset purchases. Every epoch, this balance is utilized to distribute rewards to qualifying gateways and observers based on certain performance metrics.")]),e._v(" "),a("h2",{attrs:{id:"observation-protocol"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#observation-protocol"}},[e._v("#")]),e._v(" Observation Protocol")]),e._v(" "),a("p",[e._v("The Observation protocol is organized around epochs, periods of time that are broken into an observation reporting and tallying phase. The protocol is followed across each epoch, promoting consistent healthy network activity that can form pro-social behaviors and react to malicious circumstances.")]),e._v(" "),a("img",{staticClass:"amazingdiagram",attrs:{src:e.$withBase("/images/observer-1.png")}}),e._v(" "),a("div",{staticClass:"caption"},[e._v("Observation and Incentive Protocol")]),e._v(" "),a("ul",[a("li",[e._v("To participate in the epoch, a gateway must have already staked IO tokens and joined the network before it starts.")]),e._v(" "),a("li",[e._v("Each epoch (approximately 7 block-days), a random pool of active gateways will be selected (prescribed) to perform observation duties.")]),e._v(" "),a("li",[e._v("Within the epoch, observers are tasked with evaluating a subset of ArNS names for each gateway in the network.")]),e._v(" "),a("li",[e._v("By the end of the epoch’s observation reporting period, the observer must upload its standardized health observation report to Arweave.")]),e._v(" "),a("li",[e._v("The observer must also submit an interaction to the AR.IO contract to save its report transaction ID and a summary of all failed gateways for tallying by the incentive protocol.")]),e._v(" "),a("li",[e._v("After the observation reporting period and tallying periods have closed, the payout is performed on the next contract state tick.\n"),a("ul",[a("li",[e._v("This payout rewards gateways and observers who have performed their duties.")]),e._v(" "),a("li",[e._v("Gateways that did not meet the performance threshold will not receive rewards.")]),e._v(" "),a("li",[e._v("Observers that did not perform their duties are not rewarded and in addition, are penalized on any gateway rewards received.")])])]),e._v(" "),a("li",[e._v("Community builders and application users can verify and leverage the report and distribution information to make more informed decisions on which gateway to use.")])]),e._v(" "),a("h2",{attrs:{id:"onchain-reports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onchain-reports"}},[e._v("#")]),e._v(" Onchain Reports")]),e._v(" "),a("p",[e._v("The to-be-evaluated ArNS names include a set of names randomly determined by the protocol, known as “prescribed names”, which are common across all observers within the epoch, as well as a set of “chosen names” picked at the discretion of each individual observer. “Prescribed names” are assigned to act as a common denominator / baseline while “chosen names” allow each observer to evaluate names that may be important to their operation.")]),e._v(" "),a("p",[e._v("Each observer shall assess the performance of the selected ArNS names (across all gateways) and summarize those findings in a report which details the following:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("General Information: Observer's Arweave address, starting and concluding block heights for the epoch.")])]),e._v(" "),a("li",[a("p",[e._v("Gateway Operator Assessment: The expected and actual Arweave addresses of observed gateways, along with a summary verdict (pass or fail), and accompanying reasons for failure.")])]),e._v(" "),a("li",[a("p",[e._v('Detailed ArNS Evaluations: For each gateway, it includes the domain name, evaluated ArNS names, the associated block height, transaction IDs, data hashes, a "pass or fail" score, reasons for failure (if any), and performance metrics like time to the first byte.')])])]),e._v(" "),a("p",[e._v("A comprehensive list of report criteria can be found in the Appendix.")]),e._v(" "),a("p",[e._v("Observers shall upload their completed reports (in JSON format) to the Arweave network as an onchain audit trail. In addition, observers shall submit an interaction to the AR.IO smart contact detailing each gateway that they observed to have “failed” their assessments. This is tallied and used to determine the reward distribution.")]),e._v(" "),a("h2",{attrs:{id:"selection-of-observers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#selection-of-observers"}},[e._v("#")]),e._v(" Selection of Observers")]),e._v(" "),a("p",[e._v("The observer selection process employs a random-weighted selection method. By combining random selection with weighted criteria like stake, tenure, and past rewards, the process aims to ensure both fairness and acknowledgment of consistent performance. This method allows for a systematic yet randomized approach to selecting gateways for observation tasks.")]),e._v(" "),a("h3",{attrs:{id:"criteria-for-selection"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#criteria-for-selection"}},[e._v("#")]),e._v(" Criteria for Selection")]),e._v(" "),a("p",[e._v("Up to 50 gateways can be chosen as observers per epoch. If the GAR contains 50 or fewer gateways, then every gateway is designated as an observer for that epoch. If there are greater than 50, then randomized selection shall be utilized.")]),e._v(" "),a("p",[e._v("The weighted selection criteria will consider the following for each gateway:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Stake Weight (SW): This factor considers how financially committed a gateway is to the network. It is the ratio of the amount of IO tokens staked by the gateway relative to the network minimum and is expressed as SW = Gateway Stake / Minimum Stake.")])]),e._v(" "),a("li",[a("p",[e._v("Tenure Weight (TW): This factor considers how long a gateway has been part of the network, with a maximum value capped at 4. It is calculated as TW = Gateway Network Tenure / 6 block-months. This means that the maximum value is achieved after 2 block-years of participation in the network.")])]),e._v(" "),a("li",[a("p",[e._v("Gateway Reward Ratio Weight (GRRW): This factor is a proxy for a gateway’s performance at resolving ArNS names. The weight represents the ratio of epochs in which a gateway received rewards for correctly resolving names relative to their total time on the network.")])]),e._v(" "),a("li",[a("p",[e._v("Observer Reward Ratio Weight (ORRW): This factor is a proxy for a gateway’s performance at fulfilling observation duties. The weight reflects the ratio of epochs in which a gateway, as an observer, successfully submitted observation reports relative to their total periods of service as an observer.")])])]),e._v(" "),a("h3",{attrs:{id:"weight-calculation-and-normalization"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#weight-calculation-and-normalization"}},[e._v("#")]),e._v(" Weight Calculation and Normalization")]),e._v(" "),a("p",[e._v("For each gateway, a composite weight (CW) is computed, combining the Stake Weight, Tenure Weight, Gateway Reward Ratio Weight, and Observer Reward Ratio Weight.")]),e._v(" "),a("p",[e._v("The formula used is: "),a("code",[e._v("CW = SW x TW x GRRW x ORRW")]),e._v(".")]),e._v(" "),a("p",[e._v("These weights are then normalized across the network to create a continuous range, allowing for proportional random selection based on the weighted scores. The normalized composite weight (N_CW) for each gateway indicates its likelihood of being chosen as an observer and is calculated by dividing the gateway's CW by the sum of all CWs.")]),e._v(" "),a("h3",{attrs:{id:"random-selection-process"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#random-selection-process"}},[e._v("#")]),e._v(" Random Selection Process")]),e._v(" "),a("p",[e._v("The selection of observers is randomized within the framework of these weights. A set of unique random numbers is generated within the total range of normalized weights. For each random number, the gateway whose normalized weight range encompasses this number is selected. This system ensures that while gateways with higher weights are more likely to be chosen, all gateways maintain a non-zero chance of selection, preserving both fairness and meritocracy in the observer assignment process.")]),e._v(" "),a("h2",{attrs:{id:"performance-evaluation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#performance-evaluation"}},[e._v("#")]),e._v(" Performance Evaluation")]),e._v(" "),a("p",[e._v("Consider the following classifications:")]),e._v(" "),a("ul",[a("li",[a("p",[a("strong",[e._v("Functional or Passed Gateways")]),e._v(": are gateways that meet or surpass the network’s performance and quality standards.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("Deficient or Failed Gateways")]),e._v(": are gateways that fall short of the network's performance expectations.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("Functional or Submitted Observers")]),e._v(": are selected observers who diligently perform their duties and submit observation reports and contract interactions.")])]),e._v(" "),a("li",[a("p",[a("strong",[e._v("Deficient or Failed Observers")]),e._v(": are selected observers who do not fulfill their duty of submitting observation reports and contract interactions.")])])]),e._v(" "),a("p",[e._v("At the end of an epoch, the smart contract will assess the results from the observers during a “tallying period” and determine a pass / fail score for each gateway:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("If greater than or equal to 50% of submitted observer contract interactions indicate a PASS score, then that gateway is considered Functional and eligible for gateway rewards.")])]),e._v(" "),a("li",[a("p",[e._v("Else, if greater than 50% of submitted observer contract interactions indicate a FAIL score, then that gateway is considered Deficient and ineligible for gateway rewards.")])])]),e._v(" "),a("p",[e._v("These results will determine how reward distributions are made for that epoch. Rewards shall be distributed after the epoch’s tallying period is complete.")]),e._v(" "),a("h2",{attrs:{id:"reward-distribution"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reward-distribution"}},[e._v("#")]),e._v(" Reward Distribution")]),e._v(" "),a("p",[e._v("Each epoch, a defined portion of the protocol balance (e.g., 0.25%) is earmarked for distribution as rewards. From this allocation, two distinct reward categories are derived:")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Base Gateway Reward: This is the portion of the reward allocated to each Functional Gateway within the network and is calculated as:")]),e._v(" "),a("p",[a("code",[e._v("[Epoch Reward Allocation x 95% / Total Gateways in the Network]")])])]),e._v(" "),a("li",[a("p",[e._v("Base Observer Reward: Observers, due to their additional responsibilities, have a separate reward calculated as:")]),e._v(" "),a("p",[a("code",[e._v("[Epoch Reward Allocation x 5% / Total Selected Observers for the Epoch]")])])])]),e._v(" "),a("h3",{attrs:{id:"distribution-based-on-performance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#distribution-based-on-performance"}},[e._v("#")]),e._v(" Distribution Based on Performance")]),e._v(" "),a("p",[e._v("The reward distribution is contingent on the performance classifications derived from the Performance Evaluation:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("Functional Gateways: Gateways that meet the performance criteria receive the Base Gateway Reward.")])]),e._v(" "),a("li",[a("p",[e._v("Deficient Gateways: Gateways falling short in performance do not receive any gateway rewards.")])]),e._v(" "),a("li",[a("p",[e._v("Functional Observers: Observers that fulfilled their duty receive the Base Observer Reward.")])]),e._v(" "),a("li",[a("p",[e._v("Deficient Observers: Observers failing to meet their responsibilities do not receive observer rewards. Furthermore, if they are also Functional Gateways, their gateway reward is reduced by 25% for that epoch as a consequence for not performing their observation duty.")])])]),e._v(" "),a("h3",{attrs:{id:"undistributed-rewards"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#undistributed-rewards"}},[e._v("#")]),e._v(" Undistributed Rewards")]),e._v(" "),a("p",[e._v("In cases where rewards are not distributed, either due to the inactivity or deficiency of gateways or observers, the allocated tokens shall remain in the protocol balance and carry forward to the next epoch. This mechanism is in place to discourage observers from frivolously marking their peers as offline in hopes of attaining a higher portion of the reward pool.")]),e._v(" "),a("h2",{attrs:{id:"handling-inactive-gateways"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#handling-inactive-gateways"}},[e._v("#")]),e._v(" Handling Inactive Gateways")]),e._v(" "),a("p",[e._v("To maintain network efficiency and reduce contract state bloat, gateways that are consistently offline, specifically for six (6) consecutive epochs, and thus fail to receive rewards, will be automatically removed from the Gateway Active Registry (GAR) as well as have their staked IO tokens unlocked and returned to the gateway operator.")]),e._v(" "),a("h2",{attrs:{id:"observer-report-details"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#observer-report-details"}},[e._v("#")]),e._v(" Observer Report Details")]),e._v(" "),a("p",[e._v("Each observer shall assess the performance of the selected ArNS names (across all AR.IO gateways) and summarize those findings in a report which details the following:")]),e._v(" "),a("h2",{attrs:{id:"general-information"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#general-information"}},[e._v("#")]),e._v(" General Information")]),e._v(" "),a("ul",[a("li",[e._v("The observer's Arweave address.")]),e._v(" "),a("li",[e._v("The starting block height of the epoch.")]),e._v(" "),a("li",[e._v("The block height at which the report was generated.")])]),e._v(" "),a("h2",{attrs:{id:"overall-gateway-operator-assessment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#overall-gateway-operator-assessment"}},[e._v("#")]),e._v(" Overall Gateway Operator Assessment")]),e._v(" "),a("ul",[a("li",[e._v("Gateway FQDN.")]),e._v(" "),a("li",[e._v("The Arweave address that the observer expects to be the owner / operator of the gateway.")]),e._v(" "),a("li",[e._v("The Arweave address that the observed gateway actually reports.")]),e._v(" "),a("li",[e._v("A final “pass or fail” rollup determination for each observed gateway.")]),e._v(" "),a("li",[e._v("Failure reason (if applicable).")])]),e._v(" "),a("h2",{attrs:{id:"arns-assessments"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arns-assessments"}},[e._v("#")]),e._v(" ArNS Assessments")]),e._v(" "),a("ul",[a("li",[e._v("Observed ArNS name (for all prescribed and chosen names).")]),e._v(" "),a("li",[e._v("The block height at which the name was assessed.")]),e._v(" "),a("li",[e._v("The expected status code.")]),e._v(" "),a("li",[e._v("The resolved status code.")]),e._v(" "),a("li",[e._v("The transaction ID that the observer expects the associated name to resolve to.")]),e._v(" "),a("li",[e._v("The transaction ID that the gateway actually resolves to.")]),e._v(" "),a("li",[e._v("The data hash that the observer expects the associated name to resolve to.")]),e._v(" "),a("li",[e._v("The data hash that the gateway actually resolves to.")]),e._v(" "),a("li",[e._v("The “pass or fail” score associated with the observed name, at the observer’s discretion.")]),e._v(" "),a("li",[e._v("Failure reason (if applicable).")]),e._v(" "),a("li",[e._v("Timing / performance information associated with the name resolution such as time to first byte and total duration.")])]),e._v(" "),a("p",[e._v("The above is repeated for the entire name pool and across each gateway in the GAR.")]),e._v(" "),a("h2",{attrs:{id:"example-observation-report"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example-observation-report"}},[e._v("#")]),e._v(" Example Observation Report")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://arweave.net/GG1YCFc7wQxKvQ1qD1lTEp2OAMBs4VzrpfdmeeLyjDI",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://arweave.net/GG1YCFc7wQxKvQ1qD1lTEp2OAMBs4VzrpfdmeeLyjDI "),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"viewing-observation-reports"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewing-observation-reports"}},[e._v("#")]),e._v(" Viewing Observation Reports")]),e._v(" "),a("p",[e._v("You can easily view an observation report in a human readable format through your terminal with the following command:")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-L")]),e._v(" https://arweave.net/"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("txId"),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" zcat "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" jq "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])])]),a("p",[e._v("Be sure to replace "),a("code",[e._v("<txId>")]),e._v(" with the txId of the report you want to view.")]),e._v(" "),a("h3",{attrs:{id:"example"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#example"}},[e._v("#")]),e._v(" example")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("curl")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-L")]),e._v(" https://arweave.net/H3zDmoDkpOg0U95rejBEq6gUnww_CEVscTuQVqfSbxk "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" zcat "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("|")]),e._v(" jq "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[e._v(".")]),e._v("\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);